mdl_puma560;
t1=[-1,0,0,0.3;0,1,0,-0.3;0,0,-1,0;0,0,0,1];  %起始位置
t2=[-1,0,0,0.5;0,1,0,-0.3;0,0,-1,0;0,0,0,1]; %中间点1
t3=[-1,0,0,0.5;0,1,0,-0.3;0,0,-1,-0.3;0,0,0,1];  %取物
t4=[-1,0,0,0.5;0,1,0,0.3;0,0,-1,0;0,0,0,1];     %中间点2
t5=[-1,0,0,0.5;0,1,0,0.3;0,0,-1,-0.3;0,0,0,1];   %放置
r(1,:)=p560.ikine6s(t1);   %逆求解
r(2,:)=p560.ikine6s(t2);
r(3,:)=p560.ikine6s(t3);  
r(4,:)=p560.ikine6s(t2);
r(5,:)=p560.ikine6s(t4);
r(6,:)=p560.ikine6s(t5);
r(1,2)=r(1,2)-2*pi;
r(2,2)=r(2,2)-2*pi;
r(1,6)=r(1,6)-2*pi;
r(2,6)=r(2,6)-2*pi;
r(4,2)=r(4,2)-2*pi;   %为了让机器人按较简单的短路径运动，需要某些关节角减去2*pi
r(5,2)=r(5,2)-2*pi;
r(3,6)=r(3,6)-2*pi;
r(4,6)=r(4,6)-2*pi;
m1=inv([1,0,0,0,0,0,0;0,1,0,0,0,0,0;0,0,2,0,0,0,0;1,1,1,1,1,1,1;1,3,9,27,81,243,729;0,1,6,27,108,405,1458;0,0,2,18,108,540,2430]); %M矩阵的逆
m2=[1,0,0,0,0,0,0,0,0,0,0,0,0,0;0,1,0,0,0,0,0,0,0,0,0,0,0,0;0,0,0.500000000000000,0,0,0,0,0,0,0,0,0,0,0;-0.125000000000000,-0.250000000000000,-0.250000000000000,0.125000000000000,0,0,0,0,0,0,0,0,0,0;0,0,0,0,1,0,0,0,0,0,0,0,0,0;-1.50000000000000,-2,-1,1.50000000000000,0,-1,0,0,0,0,0,0,0,0;-0.750000000000000,-1.50000000000000,-1,0.750000000000000,-3.46944695195361e-18,0,-0.500000000000000,3.46944695195361e-18,3.70074341541719e-17,-1.38777878078145e-17,1.38777878078145e-17,-3.70074341541719e-17,8.32667268468867e-17,-6.93889390390723e-17;1.12500000000000,1.87500000000000,1.12500000000000,-1.12500000000000,-0.156250000000000,0.375000000000000,0.375000000000000,0.156250000000000,0.333333333333334,-0.250000000000000,0.125000000000000,-0.333333333333334,0.750000000000001,-0.625000000000001;-0.328125000000000,-0.531250000000000,-0.312500000000000,0.328125000000000,0.0585937500000000,-0.125000000000000,-0.0937500000000000,-0.0585937500000000,-0.151041666666667,0.109375000000000,-0.0625000000000001,0.151041666666667,-0.343750000000000,0.289062500000000;0.0292968750000000,0.0468750000000000,0.0273437500000000,-0.0292968750000000,-0.00585937500000001,0.0117187500000000,0.00781250000000001,0.00585937500000001,0.0169270833333333,-0.0117187500000000,0.00781250000000001,-0.0169270833333333,0.0390625000000000,-0.0332031250000000;0,0,0,0,0,0,0,0,1,0,0,0,0,0;0,0,0,0,0,0,0,0,-1.00000000000000,0,0,1.00000000000000,-2.00000000000000,1.50000000000000;0,0,0,0,0,0,0,0,0.333333333333333,0,0,-0.333333333333333,1.00000000000000,-1.00000000000000;0,0,0,0,0,0,0,0,-0.0370370370370370,0,0,0.0370370370370370,-0.111111111111111,0.166666666666667];
for i=1:6
    b(:,i)=m1*[r(1,i);0;0;r(2,i);r(3,i);0;0];  %计算从起始点到取物的轨迹（6次）的参数
    a(:,i)=m2*[r(3,i);0;0;r(4,i);r(4,i);0;0;r(5,i);r(5,i);0;0;r(6,i);0;0]; %计算取物到放置的轨迹（3-5-3）参数
end